# DOM, VirtualDOM

### DOM 

돔은 웹의 핵심으로, 브라우저가 화면을 그리기 위한 정보를 가지고있는 문서이다. DOM의 성능에 대한 애기가 있는데, DOM의 성능 보다는 해석 과정에 문제가 많았다고 한다. (브라우저 별로 DOM을 해석하는 방법이 다르기도 하다.)



리액트는 state가 바뀔 때 `render()`가 호출 되지만 이 return 값이 바로 DOM에 반영 되지는 않는다. return된 값은 VirualDOM을 만들기위한 재료가 되고, 실제 DOM과 비교하여 바뀐 부분만 반영이 된다.



```
Jquery는 커터칼 같이 DOM을 잘라내는 방법이었다. 하지만 프론트엔드 개발의 전문성이 높아지고, 대형 앱의 유지/보수가 화두되면서 한계를 만나게 된다.  - 잡소리 -
```



### VirualDOM

VirtualDOM은 DOM을 해석하고 렌더링하는 작업을 미리 최적화 시키고, 컴포넌트 단위로 묶어서 관리할 수 있게 해준다. 컴포넌트 단위의 개발을 구현하기 위해 보다 효율적인 DOM조작 방식을 도입할 필요가 있었다. => 그게 VirtualDOM??



왜 VirtualDOM이 효율적일까?

브라우저의 work flow를 보면

1. 브라우저가 HTML을 전달 받는다.
2. 브라우저의 렌더 엔진이 HTML을 파싱한다.
3. DOM node로 이루어진 트리를 만든다 (DOM tree)(각 노드는 HTML Element와 연관되어 있다.)
4. 외부 CSS 파일 그리고 Element의 inline을 파싱한다.
5. 스타일 정보를 사용하여 DOM tree를 이요해 Render tree를 만든다.
6. 각 노드에 좌표를 만들어준다.
7. painting



결국 DOM에 변화가 생기면 렌더트리를 재생산 해야하고, 즉 스타일을 다시 계산하고... 모든 일을 다시 해야한다.

간단하게 말하면 VirtualDOM은 DOM차원에서 더블 버퍼링인 것이다.

모든 변화를 묶어서 한 번만 변화를 일으킨다. 그것이 VirtualDOM의 역할!



